kafka:
  producer:
    transaction_per_second: 100
    burst_mode: true
    burst_interval_seconds: 30
    burst_multiplier: 5.0
    bootstrap_servers: "localhost:9092"
    topic: "transactions"
    client_id: "fraud-detection-producer"
    compression_type: "snappy"
    linger_ms: 10
    batch_size: 32768
    acks: 1

  consumer:
    bootstrap_servers: "localhost:9092"
    group_id: "fraud-detection-consumer-group"
    auto_offset_reset: "earliest"
    enable_auto_commit: true
    client_id: "fraud-detection-consumer"

fraud_generator:
  max_transaction_time: 172800
  fraud_rate: 0.005

model:
  train_ratio: 0.8
  val_ratio: 0.19
  type: "decision_tree"
  params:
    random_forest:
      n_estimators: 300
      max_depth: 40
      min_samples_split: 10
      min_samples_leaf: 5
      max_features: "sqrt"
    xgboost:
      n_estimators: 300
      max_depth: 6
      learning_rate: 0.1
      random_state: 42
      n_jobs: -1
      eval_metric: "aucpr"
    decision_tree:
      criterion: entropy
      max_depth: 6
      min_samples_split: 5
      min_samples_leaf: 3
      random_state: 42

imbalance:
  method: smote
  sampling_strategy: 0.6
  random_state: 42

preprocessor:
  features_to_scale:
    - Time
    - Amount
  features_to_keep:
    - V1
    - V2
    - V3
    - V4
    - V5
    - V6
    - V7
    - V8
    - V9
    - V10
    - V11
    - V12
    - V13
    - V14
    - V15
    - V16
    - V17
    - V18
    - V19
    - V20
    - V21
    - V22
    - V23
    - V24
    - V25
    - V26
    - V27
    - V28

evaluation:
  primary_metric: "recall"
  metrics:
    - precision
    - recall
    - f1
    - pr_auc
  threshold: 0.5

tuner:
  hyperparameter_tuning:
    strategy: "grid_search"
    cv: 5
    n_jobs: -1
    verbose: 2
    random_state: 42
  param_grid:
    grid_search:
      class_weight: [balanced]
      max_depth: [2, 3, 4]
      min_samples_split: [2, 5, 10]
      min_samples_leaf: [1, 2, 5]
    random_search:
      n_estimators: [200, 300]
      max_depth: [20, 30, 40]
      min_child_weight: [1, 3, 5]
      learning_rate: [0.05, 0.1]
      scale_pos_weight: [50, 100, 200, 300]
#      min_samples_split: [10, 20, 30]
#      min_samples_leaf: [5, 10, 15]
#      max_features: [sqrt, log2]
#      n_iter: 100


output:
  model_path: "models/"
  report_path: "reports/"

databricks:
  fraud_detection:
    experiment_path: "/Users/vu.phuc@northeastern.edu/Fraud detection experiments"

mlflow:
  url: "http://localhost:5001"